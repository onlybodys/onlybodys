<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OnlyBodys</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f7f7f7;
    }
    header {
      background-color: #111;
      color: white;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 500;
    }
    header h1 { font-size: 1.5rem; }
    .cart-button {
      background: #25D366;
      border: none;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
    }
    .cart-count {
      margin-left: 0.5rem;
      background: #ffffff;
      color: #111;
      border-radius: 999px;
      padding: 0 8px;
      font-weight: 700;
      font-size: 0.85rem;
    }
    .animate-bump { animation: bump 350ms ease; }
    @keyframes bump {
      0% { transform: scale(1); }
      35% { transform: scale(1.12); }
      100% { transform: scale(1); }
    }
    .products {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      padding: 2rem;
    }
    .product {
      background: white;
      border-radius: 12px;
      padding: 1rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      text-align: center;
      position: relative;
    }
    .product img {
      max-width: 100%;
      border-radius: 8px;
      margin-bottom: 1rem;
    }
    .product h3 { margin-bottom: 0.5rem; }
    .product p { margin-bottom: 1rem; font-weight: bold; }
    .price { display: flex; align-items: baseline; justify-content: center; gap: 0.5rem; margin-bottom: 1rem; }
    .price-old { color: #8b8b8b; text-decoration: line-through; font-weight: 500; }
    .price-new { color: #111; font-weight: 800; }
    .discount-badge { background: #16a34a; color: #fff; font-size: 0.75rem; padding: 0.1rem 0.4rem; border-radius: 999px; font-weight: 700; }
    .product button {
      background-color: #111;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-weight: 600;
    }
    .product button:hover {
      background-color: #333;
    }
    .product button.sin-stock {
      background-color: #dc3545;
      cursor: not-allowed;
      opacity: 0.8;
    }
    .product button.sin-stock:hover {
      background-color: #dc3545;
      opacity: 0.8;
    }
    .product.sin-stock {
      opacity: 0.7;
    }
    .product.sin-stock .carousel {
      filter: grayscale(20%);
    }
    .stock-badge {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      background: #dc3545;
      color: white;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-size: 0.75rem;
      font-weight: 600;
      z-index: 10;
    }
    .cart-modal {
      position: fixed;
      right: 0;
      top: 0;
      width: 100%;
      max-width: 400px;
      height: 100vh;
      background: white;
      box-shadow: -2px 0 10px rgba(0,0,0,0.2);
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
      z-index: 999;
      padding: 1.5rem;
      overflow-y: auto;
    }
    .cart-modal.open { transform: translateX(0); }
    .cart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }
    .cart-item {
      background: #fff;
      border: 1px solid #e5e5e5;
      border-radius: 12px;
      padding: 1rem;
      margin-bottom: 0.75rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      display: flex;
      align-items: center;
      gap: 0.75rem;
      transition: all 0.2s ease;
    }
    .animate-flash { animation: flash-bg 800ms ease; }
    @keyframes flash-bg {
      0% { background: #fffbe6; box-shadow: 0 0 0 rgba(0,0,0,0); }
      100% { background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.06); }
    }
    .cart-item:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    }
    .cart-item-image {
      width: 60px;
      height: 60px;
      border-radius: 8px;
      object-fit: cover;
      background: #f5f5f5;
    }
    .cart-item-info {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }
    .cart-item-name {
      font-weight: 600;
      color: #333;
      font-size: 0.9rem;
      line-height: 1.3;
    }
    .cart-item-details {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.85rem;
      color: #666;
    }
    .qty-btn {
      background: #eee;
      color: #111;
      border: none;
      width: 24px;
      height: 24px;
      border-radius: 4px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
    }
    .qty-btn:hover {
      background: #ddd;
    }
    .animate-pop { animation: pop 300ms ease; }
    @keyframes pop {
      0% { transform: scale(1); }
      50% { transform: scale(1.08); }
      100% { transform: scale(1); }
    }
    .animate-press { animation: press 180ms ease; }
    @keyframes press {
      0% { transform: scale(1); }
      50% { transform: scale(0.96); }
      100% { transform: scale(1); }
    }
    .animate-tilt { animation: tilt 450ms ease; }
    @keyframes tilt {
      0% { transform: rotate(0deg) scale(1); }
      25% { transform: rotate(-3deg) scale(1.02); }
      50% { transform: rotate(3deg) scale(1.02); }
      100% { transform: rotate(0deg) scale(1); }
    }
    .cart-item-quantity {
      background: #f8f9fa;
      padding: 0.2rem 0.5rem;
      border-radius: 6px;
      font-weight: 600;
      color: #495057;
    }
    .cart-item-price {
      font-weight: bold;
      color: #111;
      font-size: 0.9rem;
    }
    .cart-item-remove {
      background: #ff4757;
      color: white;
      border: none;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }
    .cart-item-remove:hover {
      background: #ff3742;
      transform: scale(1.1);
    }
    .cart-total {
      margin-top: 1rem;
      font-weight: bold;
    }
    .checkout-btn {
      margin: 1.5rem 0 1rem 0;
      background: #25D366;
      color: white;
      border: none;
      width: 100%;
      padding: 1rem;
      font-size: 1.1rem;
      font-weight: 600;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(37, 211, 102, 0.3);
      transition: all 0.2s ease;
      position: sticky;
      bottom: 2rem;
      z-index: 100;
    }
    .checkout-btn:hover {
      background: #22c55e;
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(37, 211, 102, 0.4);
    }
    .checkout-btn:active {
      transform: translateY(0);
    }
    .nothing-btn {
      margin: 1.5rem 0 1rem 0;
      color: rgb(255, 255, 255);
      border: none;
      width: 0%;
      padding: 1rem;
      font-size: 1.1rem;
      font-weight: 1;
      border-radius: 8px;
      transition: all 0.2s ease;
      position: sticky;
      bottom: 1rem;
      z-index: 100;
    }
    .shipping-section {
      margin: 1rem 0;
      padding: 1rem;
      background: #f9f9f9;
      border-radius: 8px;
      border: 1px solid #e5e5e5;
      max-height: 300px;
      overflow-y: auto;
    }
    .shipping-section h4 {
      margin-bottom: 0.75rem;
      color: #333;
      font-size: 0.95rem;
      position: sticky;
      top: 0;
      background: #f9f9f9;
      padding: 0.5rem 0;
      z-index: 10;
    }
    .zona-group {
      margin-bottom: 1rem;
    }
    .zona-title {
      font-weight: bold;
      color: #555;
      font-size: 0.85rem;
      margin-bottom: 0.5rem;
      padding: 0.25rem 0;
      border-bottom: 1px solid #ddd;
    }
    .shipping-option {
      display: flex;
      align-items: center;
      padding: 0.5rem 0;
      cursor: pointer;
      border-radius: 4px;
      transition: background 0.2s ease;
    }
    .shipping-option:hover {
      background: rgba(0,0,0,0.05);
    }
    .shipping-option input[type="radio"] {
      margin-right: 0.75rem;
      cursor: pointer;
    }
    .shipping-info {
      flex: 1;
    }
    .shipping-name {
      font-weight: 600;
      color: #333;
      font-size: 0.9rem;
    }
    .shipping-desc {
      font-size: 0.8rem;
      color: #666;
      margin-top: 0.1rem;
    }
    .shipping-price {
      font-weight: bold;
      color: #111;
      font-size: 0.9rem;
    }
    .customer-form {
      margin: 1rem 0;
      padding: 1rem;
      background: #fff;
      border-radius: 8px;
      border: 1px solid #e5e5e5;
    }
    .customer-form h4 {
      margin-bottom: 0.75rem;
      color: #333;
      font-size: 0.95rem;
    }
    .form-group {
      margin-bottom: 0.75rem;
    }
    .form-group label {
      display: block;
      margin-bottom: 0.25rem;
      font-weight: 600;
      color: #555;
      font-size: 0.85rem;
    }
    .form-group input {
      width: 100%;
      padding: 0.5rem;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 0.9rem;
      transition: border-color 0.2s ease;
    }
    .form-group input:focus {
      outline: none;
      border-color: #111;
    }
    .form-row {
      display: flex;
      gap: 0.5rem;
    }
    .form-row .form-group {
      flex: 1;
    }
    .order-number {
      background: #f8f9fa;
      padding: 0.5rem;
      border-radius: 6px;
      text-align: center;
      font-family: monospace;
      font-weight: bold;
      color: #495057;
      font-size: 0.9rem;
      border: 1px solid #e9ecef;
    }
    .close-btn {
      background: none;
      border: none;
      font-size: 1.25rem;
      cursor: pointer;
    }
    /* Carousel */
    .carousel {
      position: relative;
      overflow: hidden;
      border-radius: 8px;
      margin-bottom: 1rem;
      background: #fff;
    }
    .carousel::before {
      content: "OnlyBodys";
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) rotate(-45deg);
      font-size: 2rem;
      font-weight: bold;
      color: rgba(255, 255, 255, 0.15);
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      z-index: 5;
      pointer-events: none;
      white-space: nowrap;
      user-select: none;
    }
    .carousel-track {
      display: flex;
      transition: transform 0.35s ease;
      will-change: transform;
    }
    .carousel-slide {
      min-width: 100%;
      user-select: none;
    }
    .carousel-slide img {
      width: 100%;
      height: auto;
      display: block;
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      pointer-events: none;
      -webkit-touch-callout: none;
      -webkit-user-drag: none;
    }
    .carousel-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0,0,0,0.45);
      color: #fff;
      border: none;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      cursor: pointer;
      display: grid;
      place-items: center;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .carousel:hover .carousel-btn {
      opacity: 1;
    }
    .carousel-btn.prev { left: 8px; }
    .carousel-btn.next { right: 8px; }
    .carousel-dots {
      display: flex;
      gap: 6px;
      justify-content: center;
      padding: 8px 0 4px;
    }
    .carousel-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #ccc;
      border: none;
      cursor: pointer;
      transition: background 0.2s ease;
    }
    .carousel-dot.active { background: #111; }
    .marquee {
      flex: 1;
      overflow: hidden;
      margin-right: 1rem;
      width: 100%;
    }
    .marquee__inner {
      display: inline-flex;
      white-space: nowrap;
      will-change: transform;
      animation: scroll-left 20s linear infinite;
      width: max-content;
    }
    .marquee__inner span {
      font-size: 1.5rem;
      font-weight: 600;
      padding-right: 4rem;
      display: inline-block;
    }
    @keyframes scroll-left {
      0% { transform: translateX(100vw); }
      100% { transform: translateX(-100%); }
    }
    .promo-bar {
      background: #f0f0f0;
      color: #111;
      text-align: center;
      font-size: 0.9rem;
      padding: 0.5rem 1rem;
      border-bottom: 1px solid #e5e5e5;
    }
    .navbar {
      background: #fff;
      border-bottom: 1px solid #eaeaea;
    }
    .navbar ul {
      list-style: none;
      display: flex;
      gap: 1rem;
      padding: 0.75rem 2rem;
      overflow-x: auto;
      white-space: nowrap;
    }
    .navbar a {
      color: #111;
      text-decoration: none;
      font-weight: 600;
      font-size: 0.95rem;
    }
    /* Estilos para el ul sin navbar */
    ul {
      list-style: none;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 0.75rem 2rem;
      background: #fff;
      border-bottom: 1px solid #eaeaea;
      margin: 0;
    }
    ul a {
      color: #111;
      text-decoration: none;
      font-weight: 600;
      font-size: 0.95rem;
    }
    .breadcrumb {
      font-size: 0.85rem;
      color: #666;
      padding: 0.75rem 2rem;
    }
    .info-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1rem;
      padding: 1rem 2rem 2rem;
    }
    .info-card {
      background: #fff;
      border: 1px solid #eee;
      border-radius: 10px;
      padding: 1rem;
      text-align: center;
    }
    .info-card h4 { margin-bottom: 0.25rem; }
    .info-card p { color: #666; font-size: 0.95rem; }
    .info-card a {
      display: block;
      width: 100%;
      height: 100%;
      text-decoration: none;
      color: inherit;
      transition: transform 0.2s ease;
    }
    .info-card a:hover {
      transform: scale(1.05);
    }
    .info-card a h4 {
      color: #E4405F;
    }
    .newsletter {
      background: #fff;
      border-top: 1px solid #eee;
      padding: 1.5rem 2rem;
      text-align: center;
      margin-top: 1rem;
    }
    .newsletter input {
      padding: 0.6rem 0.8rem;
      border: 1px solid #ddd;
      border-radius: 6px;
      width: min(420px, 90%);
      margin-right: 0.5rem;
    }
    .newsletter button {
      background: #111;
      color: #fff;
      border: none;
      padding: 0.6rem 0.9rem;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
    }
    footer {
      background-color: #222;
      color: #aaa;
      text-align: center;
      padding: 1.5rem;
      margin-top: 2rem;
    }
  </style>
</head>
<body>
  <div class="promo-bar">APROVECHA · 30% OFF EN TODA LA TIENDA</div>
  <header>
    <div class="marquee" aria-label="Mi Tienda Online">
      <div class="marquee__inner">
        <span>🛍️ OnlyBodys</span>
      </div>
    </div>
    <button class="cart-button" onclick="toggleCart()">Ver Carrito <span id="cart-count" class="cart-count">0</span></button>
  </header> 
    <ul>
      <li><a href="#">Los bodys mas HOT 🔥 los encontras todos acá </a></li>
    </ul>
  </nav>
  <div class="breadcrumb"> </div>

  <main class="products" id="product-list"></main>

  <div class="cart-modal" id="cart-modal">
    <div class="cart-header">
      <h2>🛒 Carrito</h2>
      <button class="close-btn" onclick="toggleCart()">&times;</button>
    </div>
    <div id="cart-items"></div>
    <div class="cart-total" id="cart-total">Total: $0</div>
    
    <div class="shipping-section">
      <h4>🚚 Opciones de Envío</h4>
      <div id="shipping-options"></div>
    </div>
    
    <div class="customer-form">
      <h4>📋 Datos de Envío</h4>
      <div class="form-group">
        <label>Número de Orden</label>
        <div class="order-number" id="order-number">Generando...</div>
      </div>
      <div class="form-group">
        <label for="customer-name">Nombre Completo *</label>
        <input type="text" id="customer-name" placeholder="Tu nombre y apellido" required>
      </div>
      <div class="form-group">
        <label for="customer-email">Email *</label>
        <input type="email" id="customer-email" placeholder="tu@email.com" required>
      </div>
      <div class="form-group">
        <label for="customer-phone">Teléfono *</label>
        <input type="tel" id="customer-phone" placeholder="11 1234-5678" required>
      </div>
      <div class="form-group">
        <label for="customer-address">Dirección *</label>
        <input type="text" id="customer-address" placeholder="Calle y número" required>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label for="customer-city">Localidad *</label>
          <input type="text" id="customer-city" placeholder="Tu localidad" required>
        </div>
        <div class="form-group">
          <label for="customer-postal">Código Postal</label>
          <input type="text" id="customer-postal" placeholder="1234">
        </div>
      </div>
    </div>
    
    <div class="cart-total" id="cart-shipping">Envío: $2000</div>
    <div class="cart-total" id="cart-grandtotal">Total + Envío: $0</div>
    
    <button class="checkout-btn" onclick="checkout()">Finalizar Compra</button>
    <button class="nothing-btn" onclick=""></button>
    <button class="nothing-btn" onclick=""></button>
  </div>

  <script>
    const telefono = "5491131919325"; // tu número con código país
    
    // Opciones de envío disponibles por zona
    const opcionesEnvio = [
      { id: 0, nombre: "Punto de entrega", precio: 0, descripcion: "Ballester Centro", zona: "PDE" },
      
      // CAPITAL FEDERAL
      { id: 1, nombre: "CABA", precio: 9500, descripcion: "Capital Federal", zona: "CABA" },
      
      // ZONA NORTE
      { id: 2, nombre: "Norte 1", precio: 5500, descripcion: "Boulogne, Carapachay, José León Suárez, Munro, San Andrés, Villa Adelina, Villa Ballester", zona: "Norte" },
      { id: 3, nombre: "Norte 2", precio: 6500, descripcion: "Florida, Martínez, San Martín, Loma Hermosa, Villa Martelli, San Isidro, Beccar, Acassuso, Villa Bosh, La Lucila, Olivos", zona: "Norte" },
      { id: 4, nombre: "Norte 3", precio: 7500, descripcion: "Ricardo Rojas, Ciudad Jardín, Don Torcuato, El Palomar, Sáenz Peña, San Fernando, Santos Lugares, Tigre, Victoria, Gral Pacheco", zona: "Norte" },
      { id: 5, nombre: "Norte 4", precio: 9000, descripcion: "Bella Vista, José C. Paz, G. Bourg, P. Nogués, V. Mayo, Los Polvorines, San Miguel, Garin, Tortuguitas, Benavides, Malvinas Arg., Sordeaux, Maq Savio, V. Rosa", zona: "Norte" },
      { id: 6, nombre: "Norte 5", precio: 11000, descripcion: "Del Viso, Ing. Maswich, Escobar, Pilar, Matheu, M. Alberti, Astolfi, Manzanares, Derqui, Fátima", zona: "Norte" },
      { id: 7, nombre: "Norte Lejano", precio: 15000, descripcion: "Campana", zona: "Norte" },
      { id: 8, nombre: "Norte Extremo", precio: 20000, descripcion: "Zárate", zona: "Norte" },
      { id: 9, nombre: "Norte Ultra", precio: 23000, descripcion: "Lima", zona: "Norte" },
      
      // ZONA OESTE
      { id: 10, nombre: "Oeste 1", precio: 8000, descripcion: "3 de Febrero, Caseros, Ciudadela, Haedo, José Ingenieros, Ramos Mejía, Sáenz Peña, Villa Raffo", zona: "Oeste" },
      { id: 11, nombre: "Oeste 2", precio: 10000, descripcion: "Aldo Bonzi, Castelar, Ciudad Evita, El Palomar, P. Podestá, Haedo, Hurlingham, Ituzaingó, La Tablada, Lomas del Mirador, Morón, Parque Leloir, Paso del Rey, Rafael Castillo, San Justo, Tapiales, Villa Celina, Villa Luzuriaga, Villa Madero", zona: "Oeste" },
      { id: 12, nombre: "Oeste 3", precio: 11000, descripcion: "Laferrere, La Matanza", zona: "Oeste" },
      { id: 13, nombre: "Oeste 4", precio: 12000, descripcion: "I. Casanova, G. Catán, Merlo, Monte Grande, Moreno, V. Pino, San Antonio de Padua, Tristán Suárez, Luis Guillón, Francisco Álvarez", zona: "Oeste" },
      { id: 14, nombre: "Oeste 5", precio: 15000, descripcion: "Pontevedra, M. Acosta, M. Paz, Gral Rodríguez, Cardales", zona: "Oeste" },
      { id: 15, nombre: "Oeste Lejano", precio: 23000, descripcion: "Luján, Open Door", zona: "Oeste" },
      
      // ZONA SUR
      { id: 16, nombre: "Sur 1", precio: 11000, descripcion: "Avellaneda, Banfield, Dock Sud, Gerli, Lanús, Lavallol, Lomas de Zamora, Monte Chingolo, Piñeyro, Remedios de Escalada, Sarandí, Temperley, Valentín Alsina, Villa Domínico, Wilde, Ing. Budge, Aldo Bonzi", zona: "Sur" },
      { id: 17, nombre: "Sur 2", precio: 13000, descripcion: "Adrogué, Berazategui, Bernal, Burzaco, Canning, Claypole, Don Bosco, Esteban Echeverría, Ezeiza, Ezpeleta, Florencio Varela, Alte Brown, R. Calzada", zona: "Sur" },
      { id: 18, nombre: "Sur 3", precio: 16000, descripcion: "Hudson, Longchamp, Quilmes, Solano, Ranelagh, Spegazzini", zona: "Sur" },
      { id: 19, nombre: "Sur 4", precio: 20000, descripcion: "Glew, Guernica", zona: "Sur" },
      { id: 20, nombre: "Sur 5", precio: 24000, descripcion: "Berisso, Ensenada, Alejandro Korn, La Plata (Centro, Gonnet, Ringuelet, Tolosa), La Plata (San Carlos, Los Hornos, Altos de San Lorenzo, Villa Elvira, Abasto, Olmos, Melchor Romero, Aeropuerto)", zona: "Sur" }
    ];
    
    let envioSeleccionado = opcionesEnvio[0]; // Por defecto el primer envío
    let numeroOrden = ""; // Se genera al abrir el carrito
    // Descuento configurable (porcentaje)
    let DESCUENTO_PORC = 30; // Cambia este valor para modificar el descuento global
    function precioConDescuento(precio) {
      return Math.round(precio * (1 - (DESCUENTO_PORC / 100)));
    }

    const productos = [
      { id: 1, nombre: "Body VENUS HILO", precio: 18000, stock: true, imgs: [
        "https://acdn-us.mitiendanube.com/stores/001/091/019/products/formato-web-margarets-22-42555190f3a6ba14a417515726455329-480-0.webp",
        "https://acdn-us.mitiendanube.com/stores/001/091/019/products/122-0e0f6c337ff2cb557c17392811115346-640-0.webp",
        "https://acdn-us.mitiendanube.com/stores/001/091/019/products/124-4a33486ea9eb810e7117392811115722-640-0.webp"
      ]},
      { id: 2, nombre: "Conjunto LUXURY", precio: 20000, stock: true, imgs: [
        "https://acdn-us.mitiendanube.com/stores/001/091/019/products/formato-web-margarets-7-1dab04fa4f4c1aa8c017500835199021-480-0.webp",
        "https://acdn-us.mitiendanube.com/stores/001/091/019/products/formato-web-margarets-8-fd2b6cac00bc05aaf817500835192035-640-0.webp",
        "https://acdn-us.mitiendanube.com/stores/001/091/019/products/formato-web-margarets-9-eba4ea7360ad168aed17500835199307-640-0.webp"
      ]},
      { id: 3, nombre: "Body SAVAGE", precio: 18500, stock: true, imgs: [
        "https://github.com/onlybodys/onlybodys/blob/main/ob/fotos/IMG_3996.jpg?raw=true",
        "https://github.com/onlybodys/onlybodys/blob/main/ob/fotos/IMG_3997.jpg?raw=true"
      ]},
      { id: 6, nombre: "Body ULTRA", precio: 13000, stock: true, imgs: [
        "https://raw.githubusercontent.com/onlybodys/onlybodys/refs/heads/main/ob/fotos/0690F3F7-7570-4A1B-B947-81405554872B.JPG",
        "https://github.com/onlybodys/onlybodys/blob/main/ob/fotos/2F07575F-E31E-4C81-A569-C61DEB6DE5C6.JPG?raw=true",
        "https://github.com/onlybodys/onlybodys/blob/main/ob/fotos/CE08941C-926F-478E-833E-8A2A594FCF78.JPG?raw=true"
      ]},
      { id: 4, nombre: "Body NUDE", precio: 16000, stock: true, imgs: [
        "https://github.com/onlybodys/onlybodys/blob/main/ob/fotos/IMG_3995.jpg?raw=true",
        "https://raw.githubusercontent.com/onlybodys/onlybodys/refs/heads/main/ob/fotos/IMG_3994.WEBP",
        "https://github.com/onlybodys/onlybodys/blob/main/ob/fotos/IMG_3993.JPG?raw=true"
      ]},
      { id: 5, nombre: "Body Cleo", precio: 36900, stock: false, imgs: [
        "https://acdn-us.mitiendanube.com/stores/001/091/019/products/formato-web-margarets-45-17cca741c495f2497217526199298605-640-0.webp",
        "https://acdn-us.mitiendanube.com/stores/001/091/019/products/formato-web-margarets-43-22b013424c3ffcdcc517526199300927-1024-1024.webp"
      ]}
    ];

    let carrito = JSON.parse(localStorage.getItem("carrito")) || [];

    // Estado del carrusel por producto
    const carouselState = {};

    function buildCarouselHTML(producto) {
      const imagenes = producto.imgs || (producto.img ? [producto.img] : []);
      if (imagenes.length === 0) return "";

      const slides = imagenes.map((src, index) => (
        `<div class="carousel-slide"><img src="${src}" alt="${producto.nombre} ${index + 1}" /></div>`
      )).join("");

      const dots = imagenes.length > 1
        ? `<div class="carousel-dots">${imagenes.map((_, i) => (
            `<button class="carousel-dot ${i === 0 ? 'active' : ''}" onclick="carouselGoTo(${producto.id}, ${i})" aria-label="Ir a imagen ${i+1}"></button>`
          )).join("")}</div>`
        : "";

      const controls = imagenes.length > 1
        ? `<button class="carousel-btn prev" onclick="carouselPrev(${producto.id})" aria-label="Anterior">‹</button>
           <button class="carousel-btn next" onclick="carouselNext(${producto.id})" aria-label="Siguiente">›</button>`
        : "";

      return `
        <div class="carousel" id="carousel-${producto.id}">
          <div class="carousel-track">${slides}</div>
          ${controls}
          ${dots}
        </div>
      `;
    }

    function updateCarousel(productId) {
      const producto = productos.find(p => p.id === productId);
      const imagenes = producto?.imgs || (producto?.img ? [producto.img] : []);
      const total = imagenes.length;
      if (!total) return;
      const index = Math.max(0, Math.min((carouselState[productId] ?? 0), total - 1));
      carouselState[productId] = index;

      const root = document.getElementById(`carousel-${productId}`);
      if (!root) return;
      const track = root.querySelector('.carousel-track');
      if (track) {
        track.style.transform = `translateX(-${index * 100}%)`;
      }
      const dots = root.querySelectorAll('.carousel-dot');
      dots.forEach((d, i) => d.classList.toggle('active', i === index));
    }

    function carouselNext(productId) {
      const producto = productos.find(p => p.id === productId);
      const total = (producto?.imgs || (producto?.img ? [producto.img] : [])).length;
      if (!total) return;
      const next = ((carouselState[productId] ?? 0) + 1) % total;
      carouselState[productId] = next;
      updateCarousel(productId);
    }

    function carouselPrev(productId) {
      const producto = productos.find(p => p.id === productId);
      const total = (producto?.imgs || (producto?.img ? [producto.img] : [])).length;
      if (!total) return;
      const prev = ((carouselState[productId] ?? 0) - 1 + total) % total;
      carouselState[productId] = prev;
      updateCarousel(productId);
    }

    function carouselGoTo(productId, index) {
      carouselState[productId] = index;
      updateCarousel(productId);
    }

    function generateOrderNumber() {
      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
      let result = '';
      for (let i = 0; i < 8; i++) {
        result += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      return result;
    }

    function toggleCart() {
      const isOpening = !document.getElementById("cart-modal").classList.contains("open");
      document.getElementById("cart-modal").classList.toggle("open");
      
      // Generar número de orden al abrir el carrito
      if (isOpening && !numeroOrden) {
        numeroOrden = generateOrderNumber();
        document.getElementById("order-number").textContent = numeroOrden;
      }
    }

    function validateForm() {
      const requiredFields = [
        'customer-name',
        'customer-email', 
        'customer-phone',
        'customer-address',
        'customer-city'
      ];
      
      for (let fieldId of requiredFields) {
        const field = document.getElementById(fieldId);
        if (!field || !field.value.trim()) {
          field.focus();
          alert(`Por favor completa el campo: ${field.previousElementSibling.textContent}`);
          return false;
        }
      }
      
      // Validar email
      const email = document.getElementById('customer-email').value;
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        document.getElementById('customer-email').focus();
        alert('Por favor ingresa un email válido');
        return false;
      }
      
      return true;
    }

    function cambiarEnvio(envioId) {
      envioSeleccionado = opcionesEnvio.find(e => e.id === envioId) || opcionesEnvio[0];
      renderCarrito();
    }

    function renderShippingOptions() {
      const cont = document.getElementById("shipping-options");
      cont.innerHTML = "";
      
      // Agrupar por zona
      const zonas = {};
      opcionesEnvio.forEach(envio => {
        if (!zonas[envio.zona]) {
          zonas[envio.zona] = [];
        }
        zonas[envio.zona].push(envio);
      });
      
      // Orden de zonas
      const ordenZonas = ['PDE', 'CABA', 'Norte', 'Oeste', 'Sur'];
      
      ordenZonas.forEach(zona => {
        if (zonas[zona]) {
          cont.innerHTML += `<div class="zona-group">`;
          if (zona !== 'Retiro') {
            cont.innerHTML += `<div class="zona-title">🌎 ZONA ${zona.toUpperCase()}</div>`;
          }
          
          zonas[zona].forEach(envio => {
            const isSelected = envio.id === envioSeleccionado.id;
            const precioTexto = envio.precio === 0 ? "Gratis" : `$${envio.precio.toLocaleString()}`;
            
            cont.innerHTML += `
              <label class="shipping-option" onclick="cambiarEnvio(${envio.id})">
                <input type="radio" name="shipping" value="${envio.id}" ${isSelected ? 'checked' : ''} />
                <div class="shipping-info">
                  <div class="shipping-name">${envio.nombre}</div>
                  <div class="shipping-desc">${envio.descripcion}</div>
                </div>
                <div class="shipping-price">${precioTexto}</div>
              </label>
            `;
          });
          
          cont.innerHTML += `</div>`;
        }
      });
    }

    function renderProductos() {
      const cont = document.getElementById("product-list");
      cont.innerHTML = "";
      productos.forEach(p => {
        carouselState[p.id] = 0;
        const carouselHTML = buildCarouselHTML(p);
        const stockClass = p.stock ? '' : 'sin-stock';
        const stockBadge = p.stock ? '' : '<div class="stock-badge">Sin Stock</div>';
        const buttonClass = p.stock ? '' : 'sin-stock';
        const buttonText = p.stock ? 'Agregar' : 'Sin Stock';
        const buttonAction = p.stock ? `onclick="agregarAlCarrito(${p.id}, this)"` : '';
        
        const precioOriginal = p.precio;
        const precioDescuento = precioConDescuento(precioOriginal);
        cont.innerHTML += `
          <div class="product ${stockClass}">
            ${stockBadge}
            ${carouselHTML}
            <h3>${p.nombre}</h3>
            <div class="price">
              <span class="price-old">$${precioOriginal.toLocaleString()}</span>
              <span class="price-new">$${precioDescuento.toLocaleString()}</span>
              <span class="discount-badge">-${DESCUENTO_PORC}%</span>
            </div>
            <button class="${buttonClass}" ${buttonAction}>${buttonText}</button>
          </div>
        `;
      });
      // Ajustar carrousels al estado inicial
      productos.forEach(p => updateCarousel(p.id));
    }

    function agregarAlCarrito(id, el) {
      const producto = productos.find(p => p.id === id);
      
      // Validar que el producto tenga stock
      if (!producto || !producto.stock) {
        alert("Este producto no tiene stock disponible");
        return;
      }
      
      const existe = carrito.find(p => p.id === id);
      if (existe) {
        existe.cantidad++;
      } else {
        carrito.push({ ...producto, cantidad: 1 });
      }
      guardarCarrito();
      renderCarrito();
      actualizarContadorCarrito();
      // Animación sutil en el contador y botón agregar
      const badge = document.getElementById('cart-count');
      if (badge) {
        badge.classList.remove('animate-bump');
        void badge.offsetWidth;
        badge.classList.add('animate-bump');
      }
      if (el) {
        el.classList.remove('animate-press');
        void el.offsetWidth;
        el.classList.add('animate-press');
      }
    }

    function eliminarDelCarrito(id) {
      carrito = carrito.filter(p => p.id !== id);
      guardarCarrito();
      renderCarrito();
      actualizarContadorCarrito();
    }

    function actualizarContadorCarrito() {
      const count = carrito.reduce((acc, p) => acc + p.cantidad, 0);
      const badge = document.getElementById('cart-count');
      if (badge) badge.textContent = String(count);
    }

    function renderCarrito() {
      const cont = document.getElementById("cart-items");
      cont.innerHTML = "";
      let total = 0;
      
      if (carrito.length === 0) {
        cont.innerHTML = `
          <div style="text-align: center; padding: 2rem; color: #666;">
            <div style="font-size: 3rem; margin-bottom: 0.5rem;">🛒</div>
            <p>Tu carrito está vacío</p>
            <p style="font-size: 0.85rem; margin-top: 0.5rem;">¡Agrega algunos productos increíbles!</p>
          </div>
        `;
      } else {
        carrito.forEach(p => {
          const precioUnit = precioConDescuento(p.precio);
          total += precioUnit * p.cantidad;
          const producto = productos.find(prod => prod.id === p.id);
          const imagenSrc = producto?.imgs?.[0] || producto?.img || 'https://via.placeholder.com/60x60?text=IMG';
          
          cont.innerHTML += `
            <div class="cart-item" data-id="${p.id}">
              <img src="${imagenSrc}" alt="${p.nombre}" class="cart-item-image" onload="this.classList.add('animate-tilt')" />
              <div class="cart-item-info">
                <div class="cart-item-name">${p.nombre}</div>
                <div class="cart-item-details">
                  <button class="qty-btn" onclick="cambiarCantidad(${p.id}, -1, this)" aria-label="Quitar">−</button>
                  <span class="cart-item-quantity">x${p.cantidad}</span>
                  <button class="qty-btn" onclick="cambiarCantidad(${p.id}, 1, this)" aria-label="Sumar">+</button>
                  <span class="cart-item-price">$${(precioUnit * p.cantidad).toLocaleString()}</span>
                </div>
              </div>
              <button class="cart-item-remove" onclick="eliminarDelCarrito(${p.id})" title="Eliminar producto">
                ×
              </button>
            </div>
          `;
        });
      }
      
      // Renderizar opciones de envío
      renderShippingOptions();
      
      // Actualizar totales con envío seleccionado
      const costoEnvio = envioSeleccionado.precio;
      const envioTexto = costoEnvio === 0 ? "Gratis" : `$${costoEnvio.toLocaleString()}`;
      
      document.getElementById("cart-total").innerText = `Total: $${total.toLocaleString()}`;
      document.getElementById("cart-shipping").innerText = `Envío (${envioSeleccionado.nombre}): ${envioTexto}`;
      document.getElementById("cart-grandtotal").innerText = `Total + Envío: $${(total + costoEnvio).toLocaleString()}`;
    }

    function guardarCarrito() {
      localStorage.setItem("carrito", JSON.stringify(carrito));
    }

    function cambiarCantidad(id, delta, el) {
      const item = carrito.find(p => p.id === id);
      if (!item) return;
      item.cantidad = Math.max(0, (item.cantidad || 0) + delta);
      if (item.cantidad === 0) {
        carrito = carrito.filter(p => p.id !== id);
      }
      guardarCarrito();
      renderCarrito();
      actualizarContadorCarrito();
      // Animar el item afectado si existe en DOM
      requestAnimationFrame(() => {
        const row = document.querySelector(`.cart-item[data-id="${id}"]`);
        if (row) {
          row.classList.remove('animate-flash');
          void row.offsetWidth;
          row.classList.add('animate-flash');
        }
        if (el) {
          el.classList.remove('animate-pop');
          void el.offsetWidth;
          el.classList.add('animate-pop');
        }
      });
    }

    function checkout() {
      if (carrito.length === 0) {
        alert("El carrito está vacío");
        return;
      }
      
      // Validar formulario
      if (!validateForm()) {
        return;
      }
      
      // Obtener datos del formulario
      const customerData = {
        name: document.getElementById('customer-name').value,
        email: document.getElementById('customer-email').value,
        phone: document.getElementById('customer-phone').value,
        address: document.getElementById('customer-address').value,
        city: document.getElementById('customer-city').value,
        postal: document.getElementById('customer-postal').value
      };
      
      let mensaje = `🛍️ *NUEVA ORDEN*%0A📦 *NRO.ORDEN: ${numeroOrden}*%0A%0A`;
      mensaje += `👤 *DATOS DEL CLIENTE:*%0A`;
      mensaje += `Nombre: ${customerData.name}%0A`;
      mensaje += `Email: ${customerData.email}%0A`;
      mensaje += `Teléfono: ${customerData.phone}%0A`;
      mensaje += `Dirección: ${customerData.address}%0A`;
      mensaje += `Localidad: ${customerData.city}%0A`;
      if (customerData.postal) {
        mensaje += `CP: ${customerData.postal}%0A`;
      }
      mensaje += `%0A🛒 *PRODUCTOS:*%0A`;
      
      carrito.forEach(p => {
        const unit = precioConDescuento(p.precio);
        mensaje += `• ${p.nombre} x${p.cantidad} - $${(unit * p.cantidad).toLocaleString()}%0A`;
      });
      
      const costoEnvio = envioSeleccionado.precio;
      const envioTexto = costoEnvio === 0 ? "Gratis" : `$${costoEnvio.toLocaleString()}`;
      mensaje += `%0A🚚 *ENVÍO:*%0A`;
      mensaje += `${envioSeleccionado.nombre}: ${envioTexto}%0A`;
      
      const subtotal = carrito.reduce((acc, p) => acc + precioConDescuento(p.precio) * p.cantidad, 0);
      const total = subtotal + costoEnvio;
      mensaje += `%0A💰 *TOTAL A PAGAR: $${total.toLocaleString()}*%0A`;
      mensaje += `%0A📦 Número de orden: *${numeroOrden}*`;
      
      window.open(`https://wa.me/${telefono}?text=${mensaje}`, "_blank");
    }

    // Protección de imágenes
    function protegerImagenes() {
      // Deshabilitar click derecho y mostrar advertencia
      document.addEventListener('contextmenu', function(e) {
        if (e.target.tagName === 'IMG') {
          alert('🔒 Las imágenes están protegidas');
        }
        e.preventDefault();
        return false;
      });

      // Deshabilitar arrastrar imágenes
      document.addEventListener('dragstart', function(e) {
        if (e.target.tagName === 'IMG') {
          e.preventDefault();
          return false;
        }
      });

      // Deshabilitar selección de texto en imágenes
      document.addEventListener('selectstart', function(e) {
        if (e.target.tagName === 'IMG') {
          e.preventDefault();
          return false;
        }
      });

      // Deshabilitar teclas de desarrollador
      document.addEventListener('keydown', function(e) {
        // F12, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+U
        if (e.keyCode === 123 || 
            (e.ctrlKey && e.shiftKey && (e.keyCode === 73 || e.keyCode === 74)) ||
            (e.ctrlKey && e.keyCode === 85)) {
          e.preventDefault();
          return false;
        }
      });

      // Evitar guardar imagen con Ctrl+S
      document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.keyCode === 83) {
          e.preventDefault();
          return false;
        }
      });
    }

    renderProductos();
    renderCarrito();
    actualizarContadorCarrito();
    protegerImagenes();
  </script>
  <section class="info-cards">
    <div class="info-card">
      <h4>Enviamos tu compra</h4>
      <p>Entregas a todo el país</p>
    </div>
    <div class="info-card">
      <a href="https://www.instagram.com/onlybodys.ar/" target="_blank">
        <h4>📷 Seguinos en Instagram</h4>
        <p>@onlybodys.ar</p>
      </a>
    </div>
    <div class="info-card">
      <h4>Comprá con seguridad</h4>
      <p>Tus datos siempre protegidos</p>
    </div>
  </section>
</body>
</html>